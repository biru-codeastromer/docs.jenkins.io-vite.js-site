{
  "id": "2021-12-2021-12-10-log4j2-rce-CVE-2021-44228",
  "url": "/blog/2021/12/01/2021-12-10-log4j2-rce-CVE-2021-44228/",
  "title": "Apache Log4j 2 vulnerability CVE-2021-44228",
  "date": "2021-12-01",
  "authors": [
    "wadeck",
    "daniel-beck",
    "hlemeur",
    "markewaite"
  ],
  "tags": [
    "infrastructure",
    "security"
  ],
  "summary": "The Jenkins project's response to a critical security vulnerability in the popular \"Apache Log4j 2\" library.",
  "opengraph_image": "/images/logo-title-opengraph.png",
  "content_html": "<div class=\"paragraph\">\n<p>A critical security vulnerability has been identified in the popular \"Apache Log4j 2\" library.\nThis vulnerability is identified as <a href=\"https://nvd.nist.gov/vuln/detail/CVE-2021-44228\">CVE-2021-44228</a>.</p>\n</div>\n<div class=\"sect1\">\n<h2 id=\"log4j-in-jenkins\"><a class=\"anchor\" href=\"#log4j-in-jenkins\"></a>Log4j in Jenkins</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>The Jenkins security team has confirmed that Log4j is not used in Jenkins core.\nJenkins plugins may be using Log4j.\nYou can identify whether Log4j is included with any plugin by running the following Groovy script in the <a href=\"/doc/book/managing/script-console/\">Script Console</a>:</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code>org.apache.logging.log4j.core.lookup.JndiLookup.class.protectionDomain.codeSource</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>If this results in the following error, Log4j is <strong>not</strong> included in any installed and enabled plugin:</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code>groovy.lang.MissingPropertyException: No such property: org for class: Script1</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>Otherwise, the script output will print one location where Log4j is found, which includes the plugin name in the path.\nThat plugin should be disabled or uninstalled, followed by a Jenkins restart and another script execution until the \"No such property\" error appears.</p>\n</div>\n<div class=\"paragraph\">\n<p>Affected plugins and their mitigation status are listed in the Jenkins issue tracker.\nSee <a href=\"https://issues.jenkins.io/browse/JENKINS-67353\">this Jira Epic</a> for components known to be affected.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"log4j-in-web-application-containers\"><a class=\"anchor\" href=\"#log4j-in-web-application-containers\"></a>Log4j in web application containers</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>If you are hosting your Jenkins in a separate web application container like Tomcat, Websphere, or Glassfish, check with the providers of those containers to assess if they are using a vulnerable version of Log4j.</p>\n</div>\n<div class=\"paragraph\">\n<p>When Jenkins runs from the Docker image, a native installer package (deb, rpm, msi), or is invoked with <code>java -jar jenkins.war</code>, it is not running inside a separate web application container.\nIt is using the built-in Jetty web application container that is bundled inside Jenkins and does not include Log4j.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"log4j-in-jenkins-project-infrastructure\"><a class=\"anchor\" href=\"#log4j-in-jenkins-project-infrastructure\"></a>Log4j in Jenkins project infrastructure</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>The Jenkins infrastructure team is currently checking all Jenkins project infrastructure for the presence of vulnerable versions of the Log4j library.\nThis work is ongoing.\nWe may decide to disable some services temporarily out of an abundance of caution.\nYou can see the status of services on <a href=\"https://status.jenkins.io/\">the status page</a>.</p>\n</div>\n</div>\n</div>"
}