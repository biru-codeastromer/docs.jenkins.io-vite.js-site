{
  "id": "2024-09-2024-09-10-update-center-brownouts-3",
  "url": "/blog/2024/09/10/2024-09-10-update-center-brownouts-3/",
  "title": "Brownout on Update Center (updates.jenkins.io):\n 11 and 12 September 2024",
  "date": "2024-09-10",
  "authors": [
    "smerle33"
  ],
  "tags": [
    "jenkins",
    "jenkins-infra",
    "update-center"
  ],
  "summary": "Summary ( TL;DR ) Note: this is a follow up of the 6 and 9 September brownouts . The service https://updates.jenkins.io will switch its implementation to a new system during 1 day: Wednesday 11 September 2024 from 02:00pm UTC until Thursday 12 September 2024 02:00pm UTC All Jenkins users are impacted but should not see any functional change. ⚠️ Please,…",
  "opengraph_image": "/images/post-images/2023/01/12/jenkins-newsletter/infrastructure.png",
  "content_html": "<div class=\"sect1\">\n<h2 id=\"summary-tldr\"><a class=\"anchor\" href=\"#summary-tldr\"></a>Summary (<a href=\"https://en.wikipedia.org/wiki/Wikipedia:Too_long;_didn%27t_read\">TL;DR</a>)</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Note: this is a follow up of <a href=\"/blog/2024/09/04/update-center-brownouts/\">the 6 and 9 September brownouts</a>.</p>\n</div>\n<div class=\"paragraph\">\n<p>The service <a href=\"https://updates.jenkins.io\" class=\"bare\">https://updates.jenkins.io</a> will switch its implementation to a new system during 1 day:</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Wednesday 11 September 2024 from 02:00pm UTC until Thursday 12 September 2024 02:00pm UTC</p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>All Jenkins users are impacted but should not see any functional change.</p>\n</div>\n<div class=\"paragraph\">\n<p>⚠️ Please, check that your organization respects the advertised DNS TTL or you might be stuck in the brownout longer than expected.</p>\n</div>\n<div class=\"paragraph\">\n<p>Under the hood, any HTTP request made to this service will be redirected to a mirror close to user locations during these brownouts.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"what-is-the-update-center\"><a class=\"anchor\" href=\"#what-is-the-update-center\"></a>What is the \"Update Center\"?</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Jenkins <a href=\"https://updates.jenkins.io\">Update Center</a> is a web server at the core of the Jenkins public infrastructure which distributes the plugins, tool installers, and versions index to all Jenkins servers across the world.</p>\n</div>\n<div class=\"paragraph\">\n<p>From the installation wizard to regular plugin updates, if you run Jenkins, then you use this service under the hood.</p>\n</div>\n<div class=\"paragraph\">\n<p>Today, it serves around 50 Tb of data (outbound bandwidth) each month from a single virtual machine on AWS, which costs around $6,000 per month.</p>\n</div>\n<div class=\"paragraph\">\n<p>In order to sustain this service and improve it, the Jenkins infrastructure team has worked relentlessly during the past years to have a new sustainable implementation for this service.</p>\n</div>\n<div class=\"paragraph\">\n<p>The new Update Center implementation features a highly available system that redirects user requests to a download mirror close to their location.\nAdditional information is available in the <a href=\"https://github.com/jenkins-infra/helpdesk/issues/2649\">GitHub issue</a>.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"why-this-brownout\"><a class=\"anchor\" href=\"#why-this-brownout\"></a>Why this \"<a href=\"https://en.wikipedia.org/wiki/Brownout_(electricity)\">Brownout</a>\"?</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Our functional tests and performance tests are meeting our expectations:</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>All of our Jenkins controllers are using the new Update Center implementation.</p>\n</li>\n<li>\n<p>We are using the new update center (with DNS override) in our own networks in different geo-locations.</p>\n</li>\n<li>\n<p>All of our Jenkins Docker images are using the new system.</p>\n</li>\n<li>\n<p>Our initial performance tests</p>\n</li>\n<li>\n<p>After <a href=\"/blog/2024/09/04/update-center-brownouts/\">2 successful 1-hour brownouts</a></p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"how\"><a class=\"anchor\" href=\"#how\"></a>How</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Both current and new Update Centers are updated at the same time and serve the same index.</p>\n</div>\n<div class=\"paragraph\">\n<p>Starting 5 weeks ago, the Jenkins infrastructure has been using the new Update Center (link:https://azure.updates.jenkins.io) with a client-side DNS override (<code>updates.jenkins.io</code> hostname points to this new service).</p>\n</div>\n<div class=\"paragraph\">\n<p>During this brownout, we&#8217;ll simply switch the DNS entry <code>updates.jenkins.io</code> to this new service and watch for the logs and error rate.\nAt the end, we&#8217;ll switch DNS back to the normal service and then analyze metrics and logs to see how the system behaved.</p>\n</div>\n<div class=\"paragraph\">\n<p>We are confident the new system will perform as expected. We now want to execute a 1-day brownout.</p>\n</div>\n<div class=\"paragraph\">\n<p>Please refer to the <a href=\"https://github.com/jenkins-infra/helpdesk/issues/2649\">helpdesk ticket</a> for more information.</p>\n</div>\n</div>\n</div>"
}