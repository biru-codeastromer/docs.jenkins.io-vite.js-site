{
  "id": "2024-08-2024-08-26-gsoc-manage-github-permissions",
  "url": "/blog/2024/08/26/2024-08-26-gsoc-manage-github-permissions/",
  "title": "2024 08 26 gsoc manage github permissions",
  "date": "2024-08-26",
  "authors": [
    "Alaurant"
  ],
  "tags": [
    "gsoc",
    "gsoc2024"
  ],
  "summary": "This blog showcases all the work done in the Manage jenkinsci GitHub permissions as code project during Google Summer of Code 2024. About the Project This project aims to create a solution that allows the Repository Permission Updater (RPU) to manage jenkinsci GitHub permissions as code. RPU is a vital tool used by Jenkins to manage artifactory permissions, bridge discrepanciesâ€¦",
  "opengraph_image": "/images/gsoc/opengraph.png",
  "content_html": "<div id=\"preamble\">\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>This blog showcases all the work done in the <a href=\"/projects/gsoc/2024/projects/automating-rpu-for-jenkinsci-organization/\">Manage jenkinsci GitHub permissions as code</a> project during Google Summer of Code 2024.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"about-the-project\"><a class=\"anchor\" href=\"#about-the-project\"></a>About the Project</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>This project aims to create a solution that allows the Repository Permission Updater (RPU) to manage <code>jenkinsci</code> GitHub permissions as code. RPU is a vital tool used by Jenkins to manage artifactory permissions, bridge discrepancies between Jira and GitHub issues, and enable automatic releases. Currently, RPU oversees over 2600 GitHub teams, with all team modifications handled manually by the hosting team. Automating these processes aims to significantly enhance productivity by reducing the manual workload.</p>\n</div>\n<div class=\"paragraph\">\n<p>In Jenkins, there is a strategy of using teams to manage permissions effectively. Teams are categorized into two types:</p>\n</div>\n<div class=\"paragraph\">\n<p><strong>Repository Teams</strong> are directly linked to specific repositories. The names of these teams typically follow the format <code>$repo_name + Developers</code> and they automatically assume the admin role. The developers in these teams are managed within the \"permissions\" section.</p>\n</div>\n<div class=\"paragraph\">\n<p><strong>Additional GitHub Teams</strong>, in contrast to repository teams, oversee multiple repositories without being attached to any particular one. The roles of these teams can vary, depending on the needs of the repositories they manage. The developers in these teams are organized within the \"teams\" section.</p>\n</div>\n<div class=\"paragraph\">\n<p>To enhance the management of these two distinct team types, it is necessary to modify the current YAML structure.</p>\n</div>\n<div class=\"sect2\">\n<h3 id=\"changes-to-yaml-structure\"><a class=\"anchor\" href=\"#changes-to-yaml-structure\"></a>Changes to YAML structure:</h3>\n<div class=\"sect3\">\n<h4 id=\"before\"><a class=\"anchor\" href=\"#before\"></a>Before:</h4>\n<div class=\"paragraph\">\n<p>permissions/*.yml</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-yaml\" data-lang=\"yaml\">...\ndevelopers:\n  - \"user1\"\n  - \"user2\"\n...</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>teams/*.yml</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-yaml\" data-lang=\"yaml\">---\nname: \"core\"\ndevelopers:\n  - \"user1\"\n  - \"user2\"\n...</code></pre>\n</div>\n</div>\n</div>\n<div class=\"sect3\">\n<h4 id=\"after\"><a class=\"anchor\" href=\"#after\"></a>After:</h4>\n<div class=\"paragraph\">\n<p>permissions/*.yml</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-yaml\" data-lang=\"yaml\">...\ndevelopers:\n  - ldap: \"user1\"\n    github: \"user1\"\n  - ldap: \"user2\"\n    github: \"github_user2\"\nrepository_team: \"example-repo Developers\"\nadditional_github_teams:\n  - name: \"core_team\"\n    role: \"admin\"\n...</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>teams/*.yml</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-yaml\" data-lang=\"yaml\">---\nname: \"ux\"\ngithub_team_name: \"sig-ux\"\ndevelopers:\n  - ldap: \"user1\"\n    github: \"user1\"\n  - ldap: \"user2\"\n    github: \"github_user2\"\n...</code></pre>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"phase-1\"><a class=\"anchor\" href=\"#phase-1\"></a>Phase 1</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Successfully implemented the foundational goals outlined in the proposal.</p>\n</div>\n<div class=\"sect2\">\n<h3 id=\"yaml-structure\"><a class=\"anchor\" href=\"#yaml-structure\"></a>YAML structure:</h3>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-yaml\" data-lang=\"yaml\">...\ndevelopers:\n  - \"user1\"\n  - \"user2\"\ngithub_team: \"example-repo Developers\"</code></pre>\n</div>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"skills-developed\"><a class=\"anchor\" href=\"#skills-developed\"></a>Skills Developed:</h3>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>SnackYAML</p>\n</li>\n<li>\n<p>GitHub API</p>\n</li>\n<li>\n<p>Jenkinsfile</p>\n</li>\n<li>\n<p>Docker</p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"phase-2\"><a class=\"anchor\" href=\"#phase-2\"></a>Phase 2</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>After initial implementations, I engaged in discussions with the hosting team to address real-world challenges and adapt our project accordingly.</p>\n</div>\n<div class=\"sect2\">\n<h3 id=\"yaml-structure-2\"><a class=\"anchor\" href=\"#yaml-structure-2\"></a>YAML structure:</h3>\n<div class=\"paragraph\">\n<p>permissions/*.yml</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-yaml\" data-lang=\"yaml\">...\ndevelopers:\n  - \"user1\"\n  - \"user2\"\nrepository_team: \"example-repo Developers\"\nadditional_github_teams:\n  - name: \"core_team\"\n    role: \"admin\"\n...</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>teams/*.yml</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-yaml\" data-lang=\"yaml\">---\nname: \"ux\"\ngithub_team_name: \"sig-ux\"\ndevelopers:\n  - \"user1\"\n  - \"user2\"\n...</code></pre>\n</div>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"skills-developed-2\"><a class=\"anchor\" href=\"#skills-developed-2\"></a>Skills Developed:</h3>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>GitHub Actions</p>\n</li>\n<li>\n<p>Java GitHub API</p>\n</li>\n<li>\n<p>Testing with Mockito and JUnit</p>\n</li>\n<li>\n<p>Introductory Terraform</p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"next-steps\"><a class=\"anchor\" href=\"#next-steps\"></a>Next steps</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>The development of this project has followed a complex path, shaped by real-world challenges encountered in Phase 2 that diverged from our initial plans. As we progress, several improvements remain to be addressed to ensure that our solutions effectively meet real-world needs.</p>\n</div>\n<div class=\"olist arabic\">\n<ol class=\"arabic\">\n<li>\n<p>Due to potential discrepancies between <strong>LDAP and GitHub usernames</strong>, the YAML structure has been adjusted to include both.</p>\n</li>\n<li>\n<p><strong>Terraform</strong> will be integrated to bolster security and streamline management across GitHub workflows.</p>\n</li>\n<li>\n<p>A <strong>one-off backfill</strong> process will be implemented to synchronize data from GitHub with YAML configurations before the initial deployment, ensuring consistency.</p>\n</li>\n</ol>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"useful-links\"><a class=\"anchor\" href=\"#useful-links\"></a>Useful Links</h2>\n<div class=\"sectionbody\">\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"https://docs.google.com/document/d/17QfpBgqGglhTTS_VLv5PKxXn-UYLlTq14GPwYJZ79Zg/edit?usp=sharing\">Project Proposal</a></p>\n</li>\n<li>\n<p><a href=\"https://www.jenkins.io/projects/gsoc/2024/projects/automating-rpu-for-jenkinsci-organization/\">Project Selection Post</a></p>\n</li>\n<li>\n<p><a href=\"https://matrix.to/#/#gsoc2024-rpu:matrix.org\">Gitter Channel</a></p>\n</li>\n<li>\n<p><a href=\"https://github.com/jenkins-infra/repository-permissions-updater/pull/3998\">PR Review</a></p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"summary\"><a class=\"anchor\" href=\"#summary\"></a>Summary</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>I am grateful for the opportunity to be a part of this project; without it, my amazing journey at Jenkins would not have been possible. Special thanks to my mentor author:notmyfault[Alexander Brandes] for his support throughout the process. I also owe a lot to the org admins, particularly author:alyssat[Alyssa Tong], who not only adjusted her schedule to overcome time zone differences but also provided invaluable guidance in project management, author:krisstern[Kris Stern] was always there to assist with development challenges, offering as much help as she could, and lastly, thanks to author:gounthar[Bruno Verachten] for his support.</p>\n</div>\n</div>\n</div>"
}