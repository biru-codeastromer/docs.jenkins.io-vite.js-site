{
  "id": "2022-03-2022-03-21-java17-preview-availability",
  "url": "/blog/2022/03/01/2022-03-21-java17-preview-availability/",
  "title": "Java 17 Preview is available in Jenkins 2.339+",
  "date": "2022-03-01",
  "authors": [
    "basil"
  ],
  "tags": [
    "announcement",
    "community",
    "core",
    "java17",
    "platform-sig"
  ],
  "summary": "Starting with Jenkins 2.339, preview support for Java 17 is available.",
  "opengraph_image": "/images/post-images/2022-03-21-java17-preview-availability/java-17-preview-for-jenkins.png",
  "content_html": "<div class=\"admonitionblock warning\">\n<table>\n<tr>\n<td class=\"icon\">\n<i class=\"fa icon-warning\" title=\"Warning\"></i>\n</td>\n<td class=\"content\">\n<div class=\"paragraph\">\n<p>Please refer to the <a href=\"/doc/book/platform-information/support-policy-java\">Java requirements</a> documentation for up-to-date details on how to run Jenkins on Java 17.</p>\n</div>\n</td>\n</tr>\n</table>\n</div>\n<div class=\"paragraph\">\n<p><span class=\"image right center\"><img src=\"/images/logos/formal/256.png\" alt=\"Jenkins Java\"></span></p>\n</div>\n<div class=\"paragraph\">\n<p>Jenkins, one of the leading open-source automation servers, does not yet officially support Java 17.\nOn September 14, 2021, OpenJDK 17 was released.\nThis is a Long-Term-Support (LTS) release, and it will stay around for years.\nThe Jenkins project is eager to offer full support of this version.\nOver the last year, many contributors have been working toward enabling support for Java 17 in the project.\nIt was a thorny path, but now, on behalf of the <a href=\"/sigs/platform\">Jenkins Platform SIG</a>,\nwe are happy to announce preview availability of Java 17 support in Jenkins weekly releases!</p>\n</div>\n<div class=\"paragraph\">\n<p>Why do we need preview availability for Java 17?\nIt offers Jenkins contributors and early adopters\na way to try out the changes before the general availability release happens later this year.\nIt should help us to get more exploratory testing and, hopefully,\nresolve most of the issues before Java 17 is officially supported in Jenkins.</p>\n</div>\n<div class=\"paragraph\">\n<p>In this blog post we will describe how to run with Java 17\nand how to investigate and report compatibility issues.</p>\n</div>\n<div class=\"sect1\">\n<h2 id=\"background\"><a class=\"anchor\" href=\"#background\"></a>Background</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>A group of contributors has been working on Java 17 support,\nfocusing on enabling Java 17 support in development tools, testing, and addressing known compatibility issues.\nSee the <a href=\"/sigs/platform/#meetings\">Platform SIG meeting notes</a> for detailed status updates.\nStarting with Jenkins 2.339, Jenkins successfully runs with latest OpenJDK 17 releases on various Linux and Windows platforms.\nWe performed a <em>lot</em> of automated and exploratory tests.\nJenkins plugins appear to work well.\nThere is ongoing test automation effort toward the GA release,\nbut we were able to successfully run Jenkins core tests and <a href=\"https://github.com/jenkinsci/plugin-compat-tester\">Plugin Compatibility Tester</a> for recommended plugins.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"running-jenkins-and-java-17-in-docker\"><a class=\"anchor\" href=\"#running-jenkins-and-java-17-in-docker\"></a>Running Jenkins and Java 17 in Docker</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>For several months, we have provided Docker images for the Jenkins controller and agent.\nAll these images are based on the official <a href=\"https://hub.docker.com/_/debian\">Debian stable</a> and <a href=\"https://hub.docker.com/_/eclipse-temurin\">Eclipse Temurin</a> images maintained by the Docker community.</p>\n</div>\n<div class=\"sect2\">\n<h3 id=\"jenkins-controller-image\"><a class=\"anchor\" href=\"#jenkins-controller-image\"></a>Jenkins controller image</h3>\n<div class=\"paragraph\">\n<p>Java 17 support is now provided as a part of the official\n<a href=\"https://hub.docker.com/r/jenkins/jenkins\">jenkins/jenkins</a> image.\nYou can run Jenkins with Java 17 simply as:</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code>docker run -p 8080:8080 -p 50000:50000 jenkins/jenkins:jdk17-preview</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>The following tags are available:</p>\n</div>\n<div class=\"dlist\">\n<dl>\n<dt class=\"hdlist1\"><code>jdk17-preview</code></dt>\n<dd>\n<p>Latest weekly release with Java 17 support</p>\n</dd>\n<dt class=\"hdlist1\"><code>2.339-jdk17-preview</code></dt>\n<dd>\n<p>Weekly releases packaged with Java 17</p>\n</dd>\n</dl>\n</div>\n<div class=\"paragraph\">\n<p>The image is fully compatible with\n<a href=\"https://github.com/jenkinsci/docker/blob/master/README.md\">the official Jenkins Docker image documentation</a>,\ne.g., you can use <code>plugins.txt</code> to install plugins, mount volumes, and pass extra options via environment variables.</p>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"agent-images\"><a class=\"anchor\" href=\"#agent-images\"></a>Agent images</h3>\n<div class=\"paragraph\">\n<p>If you use containerized agents via the Docker or Kubernetes plugins,\nwe have also released official Docker images for Jenkins agents:</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"https://hub.docker.com/r/jenkins/agent\">jenkins/agent</a></p>\n</li>\n<li>\n<p><a href=\"https://hub.docker.com/r/jenkins/inbound-agent/\">jenkins/inbound-agent</a></p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>All images use the <code>jdk17-preview</code> tag.</p>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"running-jenkins-with-java\"><a class=\"anchor\" href=\"#running-jenkins-with-java\"></a>Running Jenkins with Java</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>As with Java 11, you can start Jenkins using the <code>java</code> command:</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-shell\" data-lang=\"shell\">java -jar jenkins.war --enable-future-java</code></pre>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"compatibility-issues\"><a class=\"anchor\" href=\"#compatibility-issues\"></a>Compatibility issues</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>In March 2022, the community performed many exploratory tests to discover as many Java 17 issues as possible.</p>\n</div>\n<div class=\"paragraph\">\n<p>As a result, the community solved a lot of problems before announcing Java 17 support in Jenkins. However, it is still possible that some plugins have not been updated to support Java 17.</p>\n</div>\n<div class=\"paragraph\">\n<p>If you find a regression in a plugin, please file a bug report in Jira:</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"https://issues.jenkins.io/browse/JENKINS-67908\">Open Java 17 issues</a></p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>For security issues, please use the standard <a href=\"/security/#reporting-vulnerabilities\">vulnerability reporting process</a>.\nAlthough we will be fixing Java 17 specific issues in public while Java 17 support is in preview,\nfollowing the security process will help us to investigate the impact on Java 8 and 11 users.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"contributing\"><a class=\"anchor\" href=\"#contributing\"></a>Contributing</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>We appreciate any and all contributions in the Java 17 effort,\nincluding trying out Jenkins with Java 17 and reporting or fixing compatibility issues.</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>If you want to do exploratory testing,\nwe recommend trying out Java 17 support on one of your test controllers.\nSuch testing is highly appreciated,\nespecially if you use some service integration plugins or exotic platforms.</p>\n</li>\n<li>\n<p>If you are a plugin developer/maintainer,\nwe would appreciate if you could test your plugin with Java 17.\nJava 17 developer guidelines are forthcoming.</p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>Whatever you do, please let us know about your experience by sending a message to\nthe <a href=\"https://community.jenkins.io/\">forums</a>.\nThis information will help us track changes and contributions.\nAny other feedback about the migration will be appreciated!</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"whats-next\"><a class=\"anchor\" href=\"#whats-next\"></a>What&#8217;s next?</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>We will soon be updating the toolchain to support Java 17.\nAt that point, we will publish documentation for plugin developers explaining how to test plugins with Java 17.</p>\n</div>\n<div class=\"paragraph\">\n<p>In the coming weeks we will focus on addressing feedback from early adopters and\nfixing any discovered compatibility issues.\nWe will also continue working on Java 17 support patches toward general availability later this year.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"links\"><a class=\"anchor\" href=\"#links\"></a>Links</h2>\n<div class=\"sectionbody\">\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"/sigs/platform/\">Platform Special Interest Group</a></p>\n</li>\n</ul>\n</div>\n</div>\n</div>"
}