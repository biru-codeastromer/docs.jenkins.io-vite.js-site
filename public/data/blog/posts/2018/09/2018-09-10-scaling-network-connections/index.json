{
  "id": "2018-09-2018-09-10-scaling-network-connections",
  "url": "/blog/2018/09/01/2018-09-10-scaling-network-connections/",
  "title": "Scaling Network Connections from the Jenkins Controller",
  "date": "2018-09-01",
  "authors": [
    "jglick"
  ],
  "tags": [
    "jenkinsworld",
    "jenkinsworld2018",
    "cloud-native",
    "performance",
    "scalability",
    "remoting"
  ],
  "summary": "Oleg Nenashev and I will be speaking at DevOps World | Jenkins World in San Francisco this year about Scaling Network Connections from the Jenkins Controller.",
  "opengraph_image": "/images/logo-title-opengraph.png",
  "content_html": "<div class=\"imageblock right\">\n<div class=\"content\">\n<a class=\"image\" href=\"https://www.cloudbees.com/devops-world\"><img src=\"/images/conferences/devops-world-2018.jpg\" alt=\"DevOps World | Jenkins World 2018\"></a>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>Oleg Nenashev and I will be speaking at DevOps World | Jenkins World in San Francisco this year about\n<a href=\"https://devopsworldjenkinsworld2018.sched.com/event/F9NP\">Scaling Network Connections from the Jenkins Controller</a>.\nOver the years there have been many efforts to analyze, optimize, and fortify the “Remoting channel”\nthat allows a controller to orchestrate agent activity and receive build results.\nTechniques such as tuning the agent launcher can improve service,\nbut qualitative change can only come from fundamentally reworking what gets transmitted and how.</p>\n</div>\n<div class=\"paragraph\">\n<p>In March, jira:27035[] introduced a framework for inspecting the traffic on a Remoting channel at a high level.\nPreviously, developers could only use generic low-level tools such as Wireshark,\nwhich cannot identify the precise piece of Jenkins code responsible for traffic.</p>\n</div>\n<div class=\"paragraph\">\n<p>Over the past few months, the\n<a href=\"/sigs/cloud-native/\">Cloud Native SIG</a>\nhas been making progress in addressing root causes.\nThe\n<a href=\"https://plugins.jenkins.io/artifact-manager-s3\">Artifact Manager on S3 plugin</a>\nhas been released and integrated with Jenkins Evergreen,\nallowing upload and download of large artifacts to happen entirely between the agent and Amazon servers.\nPrototype plugins allow all build log content generated by an agent (such as in <code>sh</code> steps)\nto be streamed directly to external storage services such as AWS CloudWatch Logs.\nWork has also begun on uploading JUnit-format test results, which can sometimes get big,\ndirectly from an agent to database storage.\nAll these efforts can reduce the load on the Jenkins controller and local network\nwithout requiring developers to touch their Pipeline scripts.</p>\n</div>\n<div class=\"paragraph\">\n<p>Other approaches are on the horizon.\nWhile “one-shot” agents run in fresh VMs or containers greatly improve reproducibility,\nthey suffer from the need to transmit megabytes of Java code for every build,\nso Jenkins features will need to be built to precache most or all of it.\nWork is underway to use Apache Kafka to make channels more robust against network failures.\nMost dramatically, the proposed\n<a href=\"/blog/2018/08/31/shifting-gears/#cloud-native-jenkins-mvp\">Cloud Native Jenkins MVP</a>\nwould eliminate the bottleneck of a single Jenkins controller service handling hundreds of builds.</p>\n</div>\n<div class=\"admonitionblock warning\">\n<table>\n<tr>\n<td class=\"icon\">\n<i class=\"fa icon-warning\" title=\"Warning\"></i>\n</td>\n<td class=\"content\">\n<div class=\"paragraph\">\n<p>Come meet Jesse, Oleg, and other Cloud Native SIG members at\n<a href=\"https://www.cloudbees.com/devops-world\">Jenkins World</a> on September 16-19th,\nregister with the code <code>JWFOSS</code> for a 30% discount off your pass.</p>\n</div>\n</td>\n</tr>\n</table>\n</div>"
}