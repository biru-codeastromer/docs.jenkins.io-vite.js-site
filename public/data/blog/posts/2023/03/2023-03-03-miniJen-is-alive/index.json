{
  "id": "2023-03-2023-03-03-miniJen-is-alive",
  "url": "/blog/2023/03/03/2023-03-03-miniJen-is-alive/",
  "title": "miniJen is alive!",
  "date": "2023-03-03",
  "authors": [
    "gounthar"
  ],
  "tags": [
    "jenkins",
    "miniJen",
    "riscv",
    "aarch64",
    "arm32",
    "fosdem"
  ],
  "summary": "The Jenkins multi-architecture CPU instance What is that contraption.",
  "opengraph_image": "/images/post-images/2023/03/03/2023-03-03-miniJen-is-alive/image2.png",
  "content_html": "<div id=\"preamble\">\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>The Jenkins multi-architecture CPU instance</p>\n</div>\n<div class=\"imageblock\">\n<div class=\"content\">\n<img src=\"/images/post-images/2023/03/03/2023-03-03-miniJen-is-alive/fosdem_2023_booth_display.jpg\" alt=\"miniJen as a FOSDEM display on the booth\" width=\"839\">\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"what-is-that-contraption\"><a class=\"anchor\" href=\"#what-is-that-contraption\"></a>What is that contraption?</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Nope, it's not a robot of some sort, it won't move by itself.\nIt's not <a href=\"https://en.wikipedia.org/wiki/Cerebro\">Cerebro</a> from Professor Xavier; no, it can't <a href=\"https://all3dp.com/2/raspbery-pi-drone-simply-explained/\">fly</a> either.\nWhat you're looking at is a Jenkins <a href=\"/doc/#what-is-jenkins\">instance</a>.\nIt is composed of a <a href=\"/doc/book/using/using-agents/#using-jenkins-agents\">controller</a> (the \"brain\" or conductor) and three <a href=\"/doc/book/using/using-agents/\">agents</a> (the workers or musicians if we continue a little further with the metaphor).</p>\n</div>\n<div class=\"paragraph\">\n<p>During <a href=\"https://fosdem.org/2023/\">FOSDEM</a>, we displayed the <code>aarch64</code> Jenkins controller dashboard on an another computer screen using the same Wi-Fi network.</p>\n</div>\n<div class=\"paragraph\">\n<p>These boards are not <a href=\"https://en.wikipedia.org/wiki/Microcontroller\">microcontrollers</a>, they are miniature computers running <a href=\"https://en.wikipedia.org/wiki/Linux\">GNU/Linux</a>, like the famous <a href=\"https://en.wikipedia.org/wiki/Raspberry_Pi\">Raspberry Pi</a>.</p>\n</div>\n<div class=\"paragraph\">\n<p>This Jenkins instance was featured in the <a href=\"https://hackaday.com/2023/03/01/fosdem-2023-an-open-source-conference-literally/\">Hackaday blog post</a> about FOSDEM.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"hardware\"><a class=\"anchor\" href=\"#hardware\"></a>Hardware</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>The controller runs on a <a href=\"https://www.friendlyelec.com/index.php?route=product/product&product_id=287\">NanoR5S</a>, sold as a <a href=\"https://en.wikipedia.org/wiki/Router_(computing)\">router</a> (thus the three <a href=\"https://en.wikipedia.org/wiki/Modular_connector#8P8C\">RJ45</a> connectors).</p>\n</div>\n<div class=\"imageblock\">\n<div class=\"content\">\n<img src=\"/images/post-images/2023/03/03/2023-03-03-miniJen-is-alive/NanoPi_R5S-01B.png\" alt=\"NanoPi R5S pic from the manufacturer\" width=\"500\">\n</div>\n</div>\n<div class=\"paragraph\">\n<p>It's a 4GB <a href=\"https://en.wikipedia.org/wiki/AArch64\"><code>aarch64</code></a> (or <code>armv8</code>) <a href=\"https://wiki.friendlyelec.com/wiki/index.php/File:Rockchip_RK3568B2_Datasheet_V1.0.pdf\">4 cores</a> running <a href=\"https://wiki.friendlyelec.com/wiki/index.php/FriendlyCore_(based_on_ubuntu-core_with_Qt)\">friendlyCore</a>, a distribution from the manufacturer (<a href=\"https://friendlyelec.com/\">friendlyElec</a>) on a <a href=\"https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.10\">5.10.x kernel</a>.</p>\n</div>\n<div class=\"paragraph\">\n<p>The smallest board is a 4 cores <a href=\"https://en.wikipedia.org/wiki/ARM_architecture_family#32-bit_architecture\"><code>arm32</code></a> agent with 512MB of RAM running <a href=\"https://en.wikipedia.org/wiki/Armbian\">Armbian</a> with a 5.10.x kernel too.</p>\n</div>\n<div class=\"imageblock\">\n<div class=\"content\">\n<img src=\"/images/post-images/2023/03/03/2023-03-03-miniJen-is-alive/NanoPi_Duo2-2.png\" alt=\"NanoPi Duo2 pic from the manufacturer\" width=\"500\">\n</div>\n</div>\n<div class=\"paragraph\">\n<p>It's also a board coming from the <a href=\"https://friendlyelec.com/\">friendlyElec</a> manufacturer, the <a href=\"https://www.friendlyelec.com/index.php?route=product/product&path=69&product_id=244&sort=p.price&order=ASC\">NanoPi Duo2</a>.</p>\n</div>\n<div class=\"paragraph\">\n<p>The pink board next to the <code>arm32</code> board is a <a href=\"https://en.wikipedia.org/wiki/RISC-V\"><code>RISC-V</code></a> board running <a href=\"https://forum.armbian.com/topic/21465-armbian-image-and-build-support-for-risc-v/\">Armbian</a> with just 1 core, 1GB of RAM and a <a href=\"https://cdn.kernel.org/pub/linux/kernel/v6.x/ChangeLog-6.1\">6.1.x kernel</a>.</p>\n</div>\n<div class=\"imageblock\">\n<div class=\"content\">\n<img src=\"/images/post-images/2023/03/03/2023-03-03-miniJen-is-alive/mq-pro.png\" alt=\"MangoPi MQ-Pro pic from the manufacturer\" width=\"500\">\n</div>\n</div>\n<div class=\"paragraph\">\n<p>It's a MangoPi <a href=\"https://mangopi.org/mqpro\">MQ-Pro</a> from <a href=\"https://mangopi.org/\">MangoPi</a>, one of the first <code>RISC-V</code> boards available.</p>\n</div>\n<div class=\"paragraph\">\n<p>The latest board just next to the <code>RISC-V</code> board with a slightly different shade of pink is an <code>aarch64</code> board also from <a href=\"https://mangopi.org/\">MangoPi</a>.</p>\n</div>\n<div class=\"imageblock\">\n<div class=\"content\">\n<a class=\"image\" href=\"https://world.taobao.com/item/662901818090.htm\"><img src=\"/images/post-images/2023/03/03/2023-03-03-miniJen-is-alive/mq-quad.png\" alt=\"MangoPi MQ-Quad pic from a taobao store\" width=\"500\"></a>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>It is a 4 cores agent with 1GB of RAM running a fork of Armbian with <a href=\"https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.16\">kernel 5.16.x</a>.\nIt's a <a href=\"https://mangopi.org/mqquad\">MangoPi MQ-Quad</a>.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"dont-try-to-fool-me-there-are-no-cables-between-the-boards\"><a class=\"anchor\" href=\"#dont-try-to-fool-me-there-are-no-cables-between-the-boards\"></a>Don't try to fool me, there are no cables between the boards!</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>The boards all have Wi-Fi, and they are all connected to the same Wi-Fi network, provided by a router or my phone, depending on the location.\nYou can spot their small Wi-Fi antennas hanging in the first pic, except for the router which has no integrated Wi-Fi (it uses a <a href=\"https://www.realtek.com/en/products/communications-network-ics/item/rtl8821cu\">USB Wi-Fi dongle</a> you can see in the pic).\nOne day, the R5S controller will also be a router for miniJen, but for now, it's just a Jenkins controller.\nHow come the controller can contact and control the agents? We're not using IP addresses, but hostnames ending in <code>.local</code>, thanks to the <a href=\"https://en.wikipedia.org/wiki/Avahi_(software)\">Avahi</a> daemon.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"what-is-that-big-box-with-cables\"><a class=\"anchor\" href=\"#what-is-that-big-box-with-cables\"></a>What is that big box with cables?</h2>\n<div class=\"sectionbody\">\n<div class=\"imageblock\">\n<div class=\"content\">\n<img src=\"/images/post-images/2023/03/03/2023-03-03-miniJen-is-alive/pine-power.png\" alt=\"PinePower powering very astemious boards picture courtesy of HackaDay's author https://hackaday.com/author/aryavoronova/[Arya Voronova]\" width=\"839\">\n</div>\n</div>\n<div class=\"paragraph\">\n<p>These boards are powered thanks to a <a href=\"https://www.pine64.org/\">Pine64</a> <a href=\"https://www.pine64.org/pinepowerdesktop/\">power supply</a>.\nMost of the time, you can see they don't use much current.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"3d-printed-parts\"><a class=\"anchor\" href=\"#3d-printed-parts\"></a>3D printed parts</h2>\n<div class=\"sectionbody\">\n<div class=\"imageblock\">\n<div class=\"content\">\n<img src=\"/images/post-images/2023/03/03/2023-03-03-miniJen-is-alive/round-booth-display-2023-02-02-transparent.png\" alt=\"The 3DDesign on the 2nd of February 2023\" width=\"839\">\n</div>\n</div>\n<div class=\"paragraph\">\n<p>The frame looks strange, I know. I wanted to use a torus because it's a cool-looking shape, and tentacles because it's even more cool-looking than a torus.<br>\nIt has been designed thanks to <a href=\"https://openscad.org/\">openSCAD</a>, an â€¦&#8203; open-source <a href=\"https://en.wikipedia.org/wiki/Computer-aided_design\">computer-aided design</a> tool & language (yes, there is such a thing as 3D Design as code), and printed at home on a <a href=\"https://eryone.com/fdm/show/1.html\">printer</a> running an open-source firmware, <a href=\"https://marlinfw.org/\">Marlin</a>.</p>\n</div>\n<div class=\"paragraph\">\n<p>Should you want to replicate this at home, you can find the <a href=\"https://github.com/MerryKombo/3DDesign/tree/MQ-Pro/assets/Booth%20Display\">source code</a> on my <a href=\"https://github.com/gounthar\">GitHub</a>.</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"genesis-and-near-future\"><a class=\"anchor\" href=\"#genesis-and-near-future\"></a>Genesis and near future</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>I have made a few <a href=\"https://www.youtube.com/@jeanquinze/streams\">live streams</a> during the build of miniJen, and should do some more for the upcoming modifications.\nI also have a few videos on the same <a href=\"https://www.youtube.com/@jeanquinze/featured\">channel</a> about Jenkins and other boards, so don't hesitate to have a look.</p>\n</div>\n</div>\n</div>"
}